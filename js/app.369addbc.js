(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,a){e.exports=a("2f39")},"2f39":function(e,t,a){"use strict";a.r(t);var r=a("967e"),n=a.n(r),s=(a("a481"),a("96cf"),a("fa84")),o=a.n(s),u=(a("7d6e"),a("e54f"),a("62f2"),a("31cd"),a("2b0e")),i=a("b05d"),c=a("18d6"),d=a("436b"),l=a("f508");u["a"].use(i["a"],{config:{},plugins:{LocalStorage:c["a"],Dialog:d["a"],Loading:l["a"]}});var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},p=[],h=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),g=a.n(h),m=a("2f62");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){g()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w,D={methods:v({},Object(m["b"])("store",["handleAuthStateChange"])),mounted:function(){this.handleAuthStateChange()}},I=D,U=a("2877"),y=Object(U["a"])(I,f,p,!1,null,null,null),k=y.exports,O=(a("7f7f"),a("dad6")),P=a.n(O),j=(a("f751"),a("cf57"),a("59ca")),S=(a("ea7b"),a("66ce"),{apiKey:"AIzaSyDhN7qnDUiX3aXHYpurbWcYWc5LTgkS1nA",authDomain:"smackchat-e5aea.firebaseapp.com",databaseURL:"https://smackchat-e5aea.firebaseio.com",projectId:"smackchat-e5aea",storageBucket:"smackchat-e5aea.appspot.com",messagingSenderId:"884786457897",appId:"1:884786457897:web:f963949326aaf096691b38"}),x=j["initializeApp"](S),M=x.auth(),A=x.database();function E(e){l["a"].hide(),d["a"].create({title:"Error",message:e})}var L={userDetails:{},users:{},messages:{},loggedIn:!1,usersDownloaded:!1,messagesDownloaded:!1},$={setLoggedIn:function(e,t){e.loggedIn=t},setUserDetails:function(e,t){e.userDetails=t},addUser:function(e,t){u["a"].set(e.users,t.userId,t.userDetails)},updateUser:function(e,t){Object.assign(e.users[t.userId],t.userDetails)},addMessage:function(e,t){u["a"].set(e.messages,t.messageId,t.messageDetails)},clearMessages:function(e){e.messages={}},setUsersDownloaded:function(e,t){e.usersDownloaded=t},setMessagesDownloaded:function(e,t){e.messagesDownloaded=t}},_={registerUser:function(e,t){P()(e),l["a"].show(),M.createUserWithEmailAndPassword(t.email,t.password).then((function(e){var a=M.currentUser.uid;A.ref("users/"+a).set({name:t.name,email:t.email,online:!0})})).catch((function(e){E(e.message)}))},loginUser:function(e,t){P()(e),l["a"].show(),M.signInWithEmailAndPassword(t.email,t.password).then((function(e){})).catch((function(e){E(e.message)}))},logoutUser:function(){M.signOut()},handleAuthStateChange:function(e){var t=this,a=e.commit,r=e.dispatch,n=e.state;M.onAuthStateChanged((function(e){if(l["a"].hide(),e){a("setLoggedIn",!0),c["a"].set("loggedIn",!0);var s=M.currentUser.uid;A.ref("users/"+s).once("value",(function(e){var t=e.val();a("setUserDetails",{name:t.name,email:t.email,userId:s})})),r("firebaseUpdateUser",{userId:s,updates:{online:!0}}),r("firebaseGetUsers"),t.$router.push("/")}else a("setUsersDownloaded",!1),a("setLoggedIn",!1),c["a"].set("loggedIn",!1),r("firebaseUpdateUser",{userId:n.userDetails.userId,updates:{online:!1}}),a("setUserDetails",{}),t.$router.replace("/auth")}))},firebaseUpdateUser:function(e,t){P()(e),t.userId&&A.ref("users/"+t.userId).update(t.updates)},firebaseGetUsers:function(e){var t=this,a=e.commit,r=A.ref("users");r.once("value",(function(e){a("setUsersDownloaded",!0)}),(function(e){E(e.message),t.$router.replace("/auth")})),r.on("child_added",(function(e){var t=e.val(),r=e.key;a("addUser",{userId:r,userDetails:t})})),r.on("child_changed",(function(e){var t=e.val(),r=e.key;a("updateUser",{userId:r,userDetails:t})}))},firebaseGetMessages:function(e,t){var a=this,r=e.commit,n=e.state,s=n.userDetails.userId;w=A.ref("chats/"+s+"/"+t),w.once("value",(function(e){r("setMessagesDownloaded",!0)}),(function(e){E(e.message),a.$router.replace("/auth")})),w.on("child_added",(function(e){var t=e.val(),a=e.key;r("addMessage",{messageId:a,messageDetails:t})}))},firebaseStopGettingMessages:function(e){var t=e.commit;w&&(t("setMessagesDownloaded",!1),w.off("child_added"),t("clearMessages"))},firebaseSendMessage:function(e,t){var a=e.state;A.ref("chats/"+a.userDetails.userId+"/"+t.otherUserId).push(t.message),t.message.from="them",A.ref("chats/"+t.otherUserId+"/"+a.userDetails.userId).push(t.message)}},C={users:function(e){var t={};return Object.keys(e.users).forEach((function(a){a!==e.userDetails.userId&&(t[a]=e.users[a])})),t}},G={namespaced:!0,state:L,mutations:$,actions:_,getters:C};u["a"].use(m["a"]);var W=function(){var e=new m["a"].Store({modules:{store:G},strict:!1});return e},q=a("8c4f"),V=[{path:"/",component:function(){return Promise.all([a.e("75d88722"),a.e("573d878e")]).then(a.bind(null,"f241"))},children:[{path:"",component:function(){return Promise.all([a.e("75d88722"),a.e("2d0d3ae1")]).then(a.bind(null,"5e94"))}},{path:"/chat/:otherUserId",component:function(){return Promise.all([a.e("75d88722"),a.e("cc9c0d5c")]).then(a.bind(null,"5b17"))}},{path:"/auth",component:function(){return Promise.all([a.e("75d88722"),a.e("569abbc2")]).then(a.bind(null,"f724"))}}]}];V.push({path:"*",component:function(){return Promise.all([a.e("75d88722"),a.e("4b47640d")]).then(a.bind(null,"e51e"))}});var z=V;u["a"].use(q["a"]);var B=function(){var e=new q["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:z,mode:"hash",base:""});return e},J=function(){var e="function"===typeof W?W({Vue:u["a"]}):W,t="function"===typeof B?B({Vue:u["a"],store:e}):B;e.$router=t;var a={el:"#q-app",router:t,store:e,render:function(e){return e(k)}};return{app:a,store:e,router:t}},X=function(e){var t=e.router;t.beforeEach((function(e,t,a){var r=c["a"].getItem("loggedIn");r||"/auth"===e.path?r&&"/auth"==e.path?a("/"):a():a("/auth")}))},Y=J(),H=Y.app,K=Y.store,N=Y.router;function Q(){return R.apply(this,arguments)}function R(){return R=o()(n.a.mark((function e(){var t,a,r,s,o;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=!0,a=function(e){t=!1,window.location.href=e},r=window.location.href.replace(window.location.origin,""),s=[void 0,X],o=0;case 5:if(!(!0===t&&o<s.length)){e.next=23;break}if("function"===typeof s[o]){e.next=8;break}return e.abrupt("continue",20);case 8:return e.prev=8,e.next=11,s[o]({app:H,router:N,store:K,Vue:u["a"],ssrContext:null,redirect:a,urlPath:r});case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e["catch"](8),!e.t0||!e.t0.url){e.next=18;break}return window.location.href=e.t0.url,e.abrupt("return");case 18:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 20:o++,e.next=5;break;case 23:if(!1!==t){e.next=25;break}return e.abrupt("return");case 25:new u["a"](H);case 26:case"end":return e.stop()}}),e,null,[[8,13]])}))),R.apply(this,arguments)}Q()},"31cd":function(e,t,a){}},[[0,"runtime","vendor"]]]);